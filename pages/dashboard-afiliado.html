<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Panel - Bienestar APS</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <!-- Header con usuario logueado -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../index.html">
                      <img src="../assets/images/logo-bienestar.png" alt="Logo Bienestar APS" style="height:120px; width:auto;">
                    </a>
                </div>
                <nav class="user-nav">
                    <div class="user-info">
                        <span class="user-name"></span>
                        <span class="user-rut"></span>
                    </div>
                    <button class="btn btn-logout" onclick="logout()">Cerrar Sesi√≥n</button>
                </nav>
            </div>
        </div>
    </header>
    
    <!-- Navegaci√≥n Dashboard -->
    <nav class="dashboard-nav">
        <div class="container">
            <ul class="nav-tabs">
                <li class="nav-tab active" data-tab="resumen">üìä Resumen</li>
                <li class="nav-tab" data-tab="compras-gas">üõí Compra de Gas</li>
                <li class="nav-tab" data-tab="compra-cine">üé¨ Compra de Cine</li>
                <li class="nav-tab" data-tab="compra-jumper">ü§∏ Compra Jumper Park</li>
                <li class="nav-tab" data-tab="compra-gimnasio">üí™ Compra Gimnasio</li>
                <li class="nav-tab" data-tab="prestamos">üí∞ Pr√©stamos y Fondo Solidario</li>
                <li class="nav-tab" data-tab="solicitudes">üìù Solicitudes</li>
                <li class="nav-tab" data-tab="perfil">‚öôÔ∏è Mi Perfil</li>
            </ul>
        </div>
    </nav>
 
    <!-- Contenido del Dashboard -->
    <section class="dashboard-content">
        <div class="container">
            <!-- Tab: Resumen -->
            <div class="tab-content active" id="tab-resumen">
                <div class="welcome-banner">
                    <h1 id="bienvenida-usuario"></h1>
                    <p>Aqu√≠ puedes gestionar tus beneficios y convenios</p>
                </div>
                <div class="stats-grid">
                    <!-- Solicitudes pendientes -->
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-info">
                            <h3 id="solicitudes-pendientes"></h3>
                            <p>Solicitudes pendientes</p>
                        </div>
                    </div>

                    <!-- Tiempo de afiliaci√≥n -->
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="tiempo-afiliacion"></h3>
                            <p>Tiempo de afiliaci√≥n</p>
                        </div>
                    </div>
                </div>
                <!-- Notificaciones -->
                <div class="section-card">
                    <h2>üîî Notificaciones Recientes</h2>
                    <div class="notifications" id="notificaciones-recientes"></div>
                </div>
            </div>

            <!-- Tab: Compra de Gas -->
            <div class="tab-content" id="tab-compras-gas">
                <h2>üõí Compra de Vales de Gas</h2>
                
                <div class="info-box" style="background: #ed9187; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üìã Informaci√≥n:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>L√≠mites Mensuales</li>
                        <li>‚ùÑÔ∏è Temporada Normal (Oct-May): M√°ximo 4 cargas mensuales, m√°ximo 2 por tipo</li>
                        <li>üî• Temporada Alta (Jun-Sep): M√°ximo 6 cargas mensuales, m√°ximo 3 por tipo (45kg m√°x. 2)</li>
                    </ul>
                </div>
                
                <!-- Informaci√≥n de Precios -->
                <div class="info-precios-gas" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <!-- Precios Lipigas -->
                    <div class="info-box" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);">
                        <h3 style="margin: 0 0 15px 0; font-size: 1.3em; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.5em;">üî•</span> Lipigas
                        </h3>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">5 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$7.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">11 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$12.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">15 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$16.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">45 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$54.000</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Precios Abastible -->
                    <div class="info-box" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);">
                        <h3 style="margin: 0 0 15px 0; font-size: 1.3em; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.5em;">‚õΩ</span> Abastible
                        </h3>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">5 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$8.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">11 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$15.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">15 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$18.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">45 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$52.000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <form id="formCompraGas" enctype="multipart/form-data">
                    <div class="form-grid">
                        <!-- Informaci√≥n b√°sica -->
                        <div class="form-group">
                            <label>Nombre Completo</label>
                            <input type="text" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label>RUT (sin puntos, con gui√≥n)</label>
                            <input type="text" name="rut" placeholder="12345678-9" required>
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono</label>
                            <input type="tel" name="telefono" required>
                        </div>
                        <div class="form-group">
                            <label>Correo Electr√≥nico</label>
                            <input type="email" name="correo" required>
                        </div>
                        <div class="form-group">
                            <label>Empresa/Marca de Gas</label>
                            <select name="empresa" required>
                                <option value="">Seleccione empresa</option>
                                <option value="lipigas">Lipigas</option>
                                <option value="abastible">Abastible</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tipo de Gas</label>
                            <select name="tipoGas" required>
                                <option value="">Seleccione tipo</option>
                                <option value="5kg">5 kilos</option>
                                <option value="11kg">11 kilos</option>
                                <option value="15kg">15 kilos</option>
                                <option value="45kg">45 kilos</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Cantidad</label>
                            <select name="cantidad" required>
                                <option value="">Seleccione cantidad</option>
                                <option value="1">1 carga</option>
                                <option value="2">2 cargas</option>
                                <option value="3">3 cargas</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Direcci√≥n de entrega</label>
                            <textarea name="direccion" placeholder="Direcci√≥n completa con referencias" required rows="3"></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label>Subir Foto de C√©dula (ambos lados)</label>
                            <input type="file" name="cedula" accept="image/*" multiple required>
                            <small>Por favor, aseg√∫rese de que las fotos sean claras y legibles</small>
                        </div>
                    </div>
                    <div class="total-compra" id="totalCompra">
                        <strong>Total: $0</strong>
                    </div>
                    <button type="submit" class="btn btn-primary">Realizar Compra</button>
                </form>
            </div>

            <!-- Tab: Compra de Cine -->
            <div class="tab-content" id="tab-compra-cine">
                <h2>üé¨ Compra de Entradas de Cine</h2>
                
                <div class="info-box" style="background: #a8d5ba; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üé≠ Informaci√≥n sobre entradas de cine:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>Precio por entrada:</strong> $3.000</li>
                        <li><strong>M√°ximo por persona:</strong> 4 entradas mensuales</li>
                        <li><strong>V√°lidas en:</strong> Cines Hoyts, Cinemark y Cin√©polis</li>
                        <li><strong>Restricciones:</strong> No v√°lidas para estrenos, 3D o salas premium</li>
                    </ul>
                </div>

                <form id="formCompraCine" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nombre Completo</label>
                            <input type="text" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label>RUT (sin puntos, con gui√≥n)</label>
                            <input type="text" name="rut" placeholder="12345678-9" required>
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono</label>
                            <input type="tel" name="telefono" required>
                        </div>
                        <div class="form-group">
                            <label>Correo Electr√≥nico</label>
                            <input type="email" name="correo" required>
                        </div>
                        <div class="form-group">
                            <label>Cantidad de Entradas</label>
                            <select name="cantidad" required>
                                <option value="">Seleccione cantidad</option>
                                <option value="1">1 entrada</option>
                                <option value="2">2 entradas</option>
                                <option value="3">3 entradas</option>
                                <option value="4">4 entradas</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Subir Foto de C√©dula (ambos lados)</label>
                            <input type="file" name="cedula" accept="image/*" multiple required>
                            <small>Por favor, aseg√∫rese de que las fotos sean claras y legibles</small>
                        </div>
                    </div>
                    <div class="total-compra" id="totalCompraCine">
                        <strong>Total: $0</strong>
                    </div>
                    <button type="submit" class="btn btn-primary">Comprar Entradas</button>
                </form>
            </div>

            <!-- Tab: Compra Jumper Park -->
            <div class="tab-content" id="tab-compra-jumper">
                <h2>ü§∏ Compra de Entradas Jumper Park</h2>
                
                <div class="info-box" style="background: #ffd93d; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üé™ Informaci√≥n Jumper Park:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>Precio por entrada:</strong> $4.000</li>
                        <li><strong>M√°ximo por persona:</strong> 2 entradas mensuales</li>
                        <li><strong>Incluye:</strong> 1 hora de juego + calcetines antideslizantes</li>
                        <li><strong>Edad recomendada:</strong> 3 a 15 a√±os</li>
                    </ul>
                </div>

                <form id="formCompraJumper" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nombre Completo</label>
                            <input type="text" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label>RUT (sin puntos, con gui√≥n)</label>
                            <input type="text" name="rut" placeholder="12345678-9" required>
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono</label>
                            <input type="tel" name="telefono" required>
                        </div>
                        <div class="form-group">
                            <label>Correo Electr√≥nico</label>
                            <input type="email" name="correo" required>
                        </div>
                        <div class="form-group">
                            <label>Cantidad de Entradas</label>
                            <select name="cantidad" required>
                                <option value="">Seleccione cantidad</option>
                                <option value="1">1 entrada</option>
                                <option value="2">2 entradas</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Subir Foto de C√©dula (ambos lados)</label>
                            <input type="file" name="cedula" accept="image/*" multiple required>
                            <small>Por favor, aseg√∫rese de que las fotos sean claras y legibles</small>
                        </div>
                    </div>
                    <div class="total-compra" id="totalCompraJumper">
                        <strong>Total: $0</strong>
                    </div>
                    <button type="submit" class="btn btn-primary">Comprar Entradas</button>
                </form>
            </div>

            <!-- Tab: Compra Gimnasio -->
            <div class="tab-content" id="tab-compra-gimnasio">
                <h2>üí™ Compra de Membres√≠as de Gimnasio</h2>
                
                <div class="info-box" style="background: #b19cd9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üèãÔ∏è Informaci√≥n Gimnasio:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>Precio mensual:</strong> $15.000</li>
                        <li><strong>M√°ximo por persona:</strong> 1 membres√≠a activa</li>
                        <li><strong>Incluye:</strong> Acceso completo, clases grupales y ducha</li>
                        <li><strong>Horarios:</strong> Lunes a domingo de 6:00 a 22:00</li>
                    </ul>
                </div>

                <form id="formCompraGimnasio" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nombre Completo</label>
                            <input type="text" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label>RUT (sin puntos, con gui√≥n)</label>
                            <input type="text" name="rut" placeholder="12345678-9" required>
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono</label>
                            <input type="tel" name="telefono" required>
                        </div>
                        <div class="form-group">
                            <label>Correo Electr√≥nico</label>
                            <input type="email" name="correo" required>
                        </div>
                        <div class="form-group">
                            <label>Duraci√≥n de Membres√≠a</label>
                            <select name="duracion" required>
                                <option value="">Seleccione duraci√≥n</option>
                                <option value="1">1 mes</option>
                                <option value="3">3 meses</option>
                                <option value="6">6 meses</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Subir Foto de C√©dula (ambos lados)</label>
                            <input type="file" name="cedula" accept="image/*" multiple required>
                            <small>Por favor, aseg√∫rese de que las fotos sean claras y legibles</small>
                        </div>
                    </div>
                    <div class="total-compra" id="totalCompraGimnasio">
                        <strong>Total: $0</strong>
                    </div>
                    <button type="submit" class="btn btn-primary">Comprar Membres√≠a</button>
                </form>
            </div>

            <!-- Tab: Pr√©stamos y Fondo Solidario -->
            <div class="tab-content" id="tab-prestamos">
                <h2>üí∞ Pr√©stamos y Fondo Solidario</h2>
                
                <!-- Informaci√≥n General -->
                <div class="info-box" style="background: #e1bee7; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 10px 0; color: #4a148c;">üìã Informaci√≥n General</h3>
                    <p><strong>Requisitos b√°sicos para pr√©stamos:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Tener al menos 3 descuentos del Servicio de Bienestar APS</li>
                        <li>Presentar documentaci√≥n completa y vigente</li>
                        <li>Evaluaci√≥n por parte del Trabajador/a Social del Servicio</li>
                    </ul>
                </div>

                <!-- Grid de Pr√©stamos -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
                    <!-- Pr√©stamos M√©dicos -->
                    <div style="background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%); border-radius: 15px; padding: 20px; color: white; box-shadow: 0 4px 15px rgba(255, 118, 117, 0.3);">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 12px; border-radius: 50%; font-size: 1.5em;">üè•</div>
                            <h3 style="margin: 0; font-size: 1.2em;">Pr√©stamos M√©dicos</h3>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <p style="margin: 0 0 10px 0; font-size: 0.9em; opacity: 0.9;">Caracter√≠sticas:</p>
                            <div style="font-size: 0.85em; line-height: 1.4;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Tope: $500.000</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>M√°ximo: 12 cuotas</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Sujeto a evaluaci√≥n del Trabajador/a Social</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="descargarFormulario('medico')" style="background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.85em; width: 100%; margin-bottom: 8px;">
                            üìÑ Descargar Formulario
                        </button>
                    </div>

                    <!-- Pr√©stamos de Emergencia -->
                    <div style="background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%); border-radius: 15px; padding: 20px; color: white; box-shadow: 0 4px 15px rgba(253, 121, 168, 0.3);">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 12px; border-radius: 50%; font-size: 1.5em;">üö®</div>
                            <h3 style="margin: 0; font-size: 1.2em;">Pr√©stamos de Emergencia</h3>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <p style="margin: 0 0 10px 0; font-size: 0.9em; opacity: 0.9;">Caracter√≠sticas:</p>
                            <div style="font-size: 0.85em; line-height: 1.4;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Tope: $500.000</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Cuotas seg√∫n condiciones establecidas</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Evaluaci√≥n por Trabajador/a Social</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Descontado de liquidaci√≥n de sueldo</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="descargarFormulario('emergencia')" style="background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.85em; width: 100%; margin-bottom: 8px;">
                            üìÑ Descargar Formulario
                        </button>
                    </div>

                    <!-- Pr√©stamos de Libre Disposici√≥n -->
                    <div style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); border-radius: 15px; padding: 20px; color: white; box-shadow: 0 4px 15px rgba(116, 185, 255, 0.3);">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 12px; border-radius: 50%; font-size: 1.5em;">üí≥</div>
                            <h3 style="margin: 0; font-size: 1.2em;">Pr√©stamos de Libre Disposici√≥n</h3>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <p style="margin: 0 0 10px 0; font-size: 0.9em; opacity: 0.9;">Caracter√≠sticas:</p>
                            <div style="font-size: 0.85em; line-height: 1.4;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Tope: $300.000</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>M√°ximo: 6 cuotas</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Requiere liquidaciones √∫ltimas 3 meses</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Fotocopia c√©dula de identidad vigente</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Formulario de pr√©stamo de libre disposici√≥n</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="descargarFormulario('libre-disposicion')" style="background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.85em; width: 100%; margin-bottom: 8px;">
                            üìÑ Descargar Formulario
                        </button>
                    </div>

                    <!-- Fondos Solidarios -->
                    <div style="background: linear-gradient(135deg, #55a3ff 0%, #003d82 100%); border-radius: 15px; padding: 20px; color: white; box-shadow: 0 4px 15px rgba(85, 163, 255, 0.3);">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 12px; border-radius: 50%; font-size: 1.5em;">ü§ù</div>
                            <h3 style="margin: 0; font-size: 1.2em;">Fondos Solidarios</h3>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <p style="margin: 0 0 10px 0; font-size: 0.9em; opacity: 0.9;">Caracter√≠sticas:</p>
                            <div style="font-size: 0.85em; line-height: 1.4;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Ayudas sin retorno</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Emergencias de salud</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Situaciones familiares complejas</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>Evaluaci√≥n previa por Trabajador/a Social</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                    <span style="background: rgba(255, 255, 255, 0.3); width: 4px; height: 4px; border-radius: 50%; display: block;"></span>
                                    <span>En conjunto con Comit√© del Servicio de Bienestar APS</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="descargarFormulario('fondo-solidario')" style="background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.85em; width: 100%; margin-bottom: 8px;">
                            üìÑ Descargar Formulario
                        </button>
                    </div>
                </div>

                <!-- Formulario de Solicitud -->
                <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);">
                    <h3 style="margin: 0 0 20px 0; color: #2d3748; display: flex; align-items: center; gap: 10px;">
                        üìÑ Solicitar Pr√©stamo o Fondo Solidario
                    </h3>
                    
                    <form id="formSolicitudPrestamo" enctype="multipart/form-data">
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">RUT del Afiliado *</label>
                                <input type="text" name="rut" placeholder="12.345.678-9" required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px;">
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">Nombre Completo *</label>
                                <input type="text" name="nombre" required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px;">
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">Correo Electr√≥nico *</label>
                                <input type="email" name="correo" required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px;">
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">Tel√©fono *</label>
                                <input type="tel" name="telefono" placeholder="+569..." required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px;">
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">Tipo de Solicitud *</label>
                                <select name="tipoSolicitud" id="tipoSolicitud" required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px;">
                                    <option value="">Seleccione tipo de solicitud</option>
                                    <option value="prestamo-medico">Pr√©stamo M√©dico</option>
                                    <option value="prestamo-emergencia">Pr√©stamo de Emergencia</option>
                                    <option value="prestamo-libre-disposicion">Pr√©stamo de Libre Disposici√≥n</option>
                                    <option value="fondo-solidario">Fondo Solidario</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">Monto Solicitado *</label>
                                <input type="number" name="monto" placeholder="Ejemplo: 250000" required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px;">
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">Descripci√≥n de la Solicitud *</label>
                            <textarea name="descripcion" rows="4" placeholder="Describe detalladamente el motivo de tu solicitud..." required style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 14px; resize: vertical;"></textarea>
                        </div>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #2d3748;">üìé Documentos Requeridos</label>
                            
                            <div style="background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                                <h4 style="margin: 0 0 10px 0; font-size: 14px; color: #4a5568;">Formulario Completo y Firmado *</h4>
                                <input type="file" name="formulario" accept=".pdf,.doc,.docx,image/*" required style="width: 100%; margin-bottom: 5px;">
                                <small style="color: #718096;">Formulario descargado y completado del tipo de pr√©stamo seleccionado</small>
                            </div>
                            
                            <div style="background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                                <h4 style="margin: 0 0 10px 0; font-size: 14px; color: #4a5568;">Fotocopia C√©dula de Identidad *</h4>
                                <input type="file" name="cedula" accept="image/*,.pdf" required style="width: 100%; margin-bottom: 5px;">
                                <small style="color: #718096;">Ambos lados de la c√©dula en solo archivo</small>
                            </div>
                            
                            <div style="background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                                <h4 style="margin: 0 0 10px 0; font-size: 14px; color: #4a5568;">√öltimas 3 Liquidaciones de Sueldo *</h4>
                                <input type="file" name="liquidaciones" accept=".pdf,.doc,.docx,image/*" multiple style="width: 100%; margin-bottom: 5px;">
                                <small style="color: #718096;">Puede seleccionar m√∫ltiples archivos</small>
                            </div>

                            <div id="documentosAdicionales" style="background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; display: none;">
                                <h4 style="margin: 0 0 10px 0; font-size: 14px; color: #4a5568;">Documentos Adicionales</h4>
                                <input type="file" name="documentosExtras" accept=".pdf,.doc,.docx,image/*" multiple style="width: 100%; margin-bottom: 5px;">
                                <small id="documentosExtrasInfo" style="color: #718096;"></small>
                            </div>
                        </div>

                        <button type="submit" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; padding: 12px 30px; border-radius: 25px; font-size: 16px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 10px; margin: 0 auto;">
                            üì§ Enviar Solicitud de Pr√©stamo
                        </button>
                    </form>
                </div>
            </div>

            <!-- Tab: Solicitudes -->
            <div class="tab-content" id="tab-solicitudes">
                <div class="solicitudes-header">
                    <h2>üìù Mis Solicitudes</h2>
                    <button class="btn btn-primary" onclick="nuevaSolicitud()">+ Nueva Solicitud</button>
                </div>
                <div class="solicitudes-list" id="listaSolicitudes">
                    <!-- Las solicitudes se cargan din√°micamente -->
                </div>
            </div>

            <!-- Tab: Mi Perfil -->
            <div class="tab-content" id="tab-perfil">
                <h2>‚öôÔ∏è Mi Perfil</h2>
                <div class="profile-grid">
                    <div class="profile-card">
                        <h3>Informaci√≥n Personal</h3>
                        <form class="profile-form">
                            <div class="form-group">
                                <label>Nombre Completo</label>
                                <input type="text" value="">
                            </div>
                            <div class="form-group">
                                <label>RUT</label>
                                <input type="text" readonly>
                            </div>
                            <div class="form-group">
                                <label>Correo Electr√≥nico</label>
                                <input type="email">
                            </div>
                            <div class="form-group">
                                <label>Tel√©fono</label>
                                <input type="tel">
                            </div>
                            <button type="submit" class="btn btn-primary">Actualizar Informaci√≥n</button>
                        </form>
                    </div>
                    <div class="profile-card">
                        <h3>Cambiar Contrase√±a</h3>
                        <form class="profile-form">
                            <div class="form-group">
                                <label>Contrase√±a Actual</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <div class="form-group">
                                <label>Nueva Contrase√±a</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <div class="form-group">
                                <label>Confirmar Contrase√±a</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <button type="submit" class="btn btn-primary">Cambiar Contrase√±a</button>
                        </form>
                    </div>
                    <div class="profile-card">
                        <h3>Informaci√≥n de Cuenta</h3>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Fecha de afiliaci√≥n:</span>
                                <span class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Centro de Salud:</span>
                                <span class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Cargas familiares:</span>
                                <span class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Estado:</span>
                                <span class="badge success"></span>
                            </div>
                        </div>
                        <button class="btn btn-secondary">Ver Cargas Familiares</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Servicio Bienestar APS - Corporaci√≥n Municipal de Puente Alto</p>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script type="module" src="../js/dashboard-afiliado-firebase.js"></script>
    <script type="module" src="../js/compras-unificadas.js"></script>
    <script type="module" src="../js/prestamos.js"></script>
    <script type="module" src="../js/prestamos-firebase.js"></script>
    <script type="module">
        // Sistema de pesta√±as
        const tabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const targetTab = this.getAttribute('data-tab');
                
                // Remover clase active de todas las pesta√±as
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Agregar clase active a la pesta√±a clickeada
                this.classList.add('active');
                
                // Mostrar el contenido correspondiente
                const targetContent = document.getElementById(`tab-${targetTab}`);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            });
        });

        // Funci√≥n para logout
        function logout() {
            if (confirm('¬øEst√° seguro que desea cerrar sesi√≥n?')) {
                sessionStorage.clear();
                localStorage.clear();
                window.location.href = '../index.html';
            }
        }

        // Funci√≥n para nueva solicitud
        function nuevaSolicitud() {
            console.log('Nueva solicitud clickeada');
        }

        // Funci√≥n para descargar formularios
        function descargarFormulario(tipo) {
            alert(`Descargando formulario de ${tipo}`);
            console.log(`Descargando formulario de tipo: ${tipo}`);
        }

        // Hacer funciones globales
        window.logout = logout;
        window.nuevaSolicitud = nuevaSolicitud;
        window.descargarFormulario = descargarFormulario;
    </script>
</body>
</html>
