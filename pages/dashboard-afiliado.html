<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Mi Panel - Bienestar APS</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <!-- Header con usuario logueado -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../index.html">
                      <img src="../assets/images/logo-bienestar.png" alt="Logo Bienestar APS" style="height:120px; width:auto;">
                    </a>
                </div>
                <nav class="user-nav">
                    <div class="user-info">
                        <span class="user-name"></span>
                        <span class="user-rut"></span>
                    </div>
                    <button class="btn btn-logout" onclick="logout()">Cerrar Sesi√≥n</button>
                </nav>
            </div>
        </div>
    </header>
    
    <!-- Navegaci√≥n Dashboard -->
    <nav class="dashboard-nav">
        <div class="container">
            <ul class="nav-tabs">
                <li class="nav-tab active" data-tab="resumen">üìä Resumen</li>
                <li class="nav-tab" data-tab="compras-gas">üõí Compra de Gas</li>
                <li class="nav-tab" data-tab="compra-cine">üé¨ Compra de Cine</li>
                <li class="nav-tab" data-tab="compra-jumper">ü§∏ Compra Jumper Park</li>
                <li class="nav-tab" data-tab="compra-gimnasio">üí™ Compra Gimnasio</li>
                 <li class="nav-tab" data-tab="prestamos">üí≥ Pr√©stamos / Fondo Solidario</li>
                <li class="nav-tab" data-tab="solicitudes">üìù Solicitudes</li>
                <li class="nav-tab" data-tab="perfil">‚öôÔ∏è Mi Perfil</li>
            </ul>
        </div>
    </nav>
 
    <!-- Contenido del Dashboard -->
    <section class="dashboard-content">
        <div class="container">
            <!-- Tab: Resumen -->
            <div class="tab-content active" id="tab-resumen">
                <div class="welcome-banner">
                    <h1 id="bienvenida-usuario"></h1>
                    <p>Aqu√≠ puedes gestionar tus beneficios y convenios</p>
                </div>
                <div class="stats-grid">
                    <!-- Solicitudes pendientes -->
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-info">
                            <h3 id="solicitudes-pendientes"></h3>
                            <p>Solicitudes pendientes</p>
                        </div>
                    </div>

                    <!-- Tiempo de afiliaci√≥n -->
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="tiempo-afiliacion"></h3>
                            <p>Tiempo de afiliaci√≥n</p>
                        </div>
                    </div>
                </div>
                <!-- Notificaciones -->
                <div class="section-card">
                    <h2>üîî Notificaciones Recientes</h2>
                    <div class="notifications" id="notificaciones-recientes"></div>
                </div>
                
            <!-- Tab: Compra de Gas -->
            <div class="tab-content" id="tab-compras-gas">
                <h2>üõí Compra de Vales de Gas</h2>
                
                <div class="info-box" style="background: #ed9187; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üìã Informaci√≥n:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>L√≠mites Mensuales</li>
                        <li>‚ùÑÔ∏è Temporada Normal (Oct-May): M√°ximo 4 cargas mensuales, m√°ximo 2 por tipo</li>
                        <li>üî• Temporada Alta (Jun-Sep): M√°ximo 6 cargas mensuales, m√°ximo 3 por tipo (45kg m√°x. 2)</li>
                    </ul>
                </div>
                
                <!-- Informaci√≥n de Precios -->
                <div class="info-precios-gas" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <!-- Precios Lipigas -->
                    <div class="info-box" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.12);">
                        <h3 style="margin: 0 0 15px 0; font-size: 1.3em; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.5em;">üî•</span> Lipigas
                        </h3>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">5 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$7.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">11 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$12.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">15 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$16.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">45 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$54.000</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Precios Abastible -->
                    <div class="info-box" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.12);">
                        <h3 style="margin: 0 0 15px 0; font-size: 1.3em; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.5em;">‚õΩ</span> Abastible
                        </h3>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">5 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$8.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">11 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$15.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">15 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$18.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.2); border-radius: 6px;">
                                <span style="font-weight: 500;">45 kilos:</span>
                                <span style="font-weight: bold; font-size: 1.1em;">$52.000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <form id="formCompraGas" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="proveedor">Proveedor de Gas</label>
                            <select id="proveedor" name="proveedor" required>
                                <option value="">Seleccione un proveedor</option>
                                <option value="lipigas">Lipigas</option>
                                <option value="abastible">Abastible</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="tipoGas">Tipo de Gas</label>
                            <select id="tipoGas" name="tipoGas" required>
                                <option value="">Seleccione el tipo</option>
                                <option value="5kg">5 kilos</option>
                                <option value="11kg">11 kilos</option>
                                <option value="15kg">15 kilos</option>
                                <option value="45kg">45 kilos</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="cantidad">Cantidad</label>
                            <input type="number" id="cantidad" name="cantidad" min="1" max="10" required>
                        </div>

                        <div class="form-group">
                            <label for="direccionEntrega">Direcci√≥n de Entrega</label>
                            <textarea id="direccionEntrega" name="direccionEntrega" rows="3" required 
                                    placeholder="Ingrese direcci√≥n completa con referencias"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="telefonoContacto">Tel√©fono de Contacto</label>
                            <input type="tel" id="telefonoContacto" name="telefonoContacto" required 
                                   placeholder="Ej: +56912345678">
                        </div>
                    </div>

                    <div class="total-display" id="totalGas" style="display: none;">
                        <h3>Total a Pagar: <span id="montoTotal">$0</span></h3>
                    </div>

                    <button type="submit" class="btn btn-primary btn-enviar-gas">
                        üõí Solicitar Compra de Gas
                    </button>
                </form>

            <!-- Tab: Compra de Cine -->
            <div class="tab-content" id="tab-compra-cine">
                <h2>üé¨ Compra de Entradas de Cine</h2>
                
                <div class="info-box" style="background: #f8d7da; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üìã Informaci√≥n:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Entradas disponibles para Cinemark y Cineplanet</li>
                        <li>Precio: $4.000 por entrada</li>
                        <li>M√°ximo 4 entradas por solicitud</li>
                        <li>Vigencia: 6 meses desde la compra</li>
                    </ul>
                </div>

                <form id="formCompraCine" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="cineComplejo">Complejo de Cine</label>
                            <select id="cineComplejo" name="cineComplejo" required>
                                <option value="">Seleccione un cine</option>
                                <option value="cinemark">Cinemark</option>
                                <option value="cineplanet">Cineplanet</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="cantidadEntradas">Cantidad de Entradas</label>
                            <input type="number" id="cantidadEntradas" name="cantidadEntradas" min="1" max="4" required>
                        </div>

                        <div class="form-group">
                            <label for="comentariosCine">Comentarios (Opcional)</label>
                            <textarea id="comentariosCine" name="comentariosCine" rows="3" 
                                    placeholder="Alg√∫n comentario adicional"></textarea>
                        </div>
                    </div>

                    <div class="total-display" id="totalCine" style="display: none;">
                        <h3>Total a Pagar: <span id="montoTotalCine">$0</span></h3>
                    </div>

                    <button type="submit" class="btn btn-primary btn-enviar-cine">
                        üé¨ Solicitar Entradas de Cine
                    </button>
                </form>
                

            <!-- Tab: Compra Jumper Park -->
            <div class="tab-content" id="tab-compra-jumper">
                <h2>ü§∏ Compra Jumper Park</h2>
                
                <div class="info-box" style="background: #d1ecf1; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üìã Informaci√≥n:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Entradas para Jumper Park</li>
                        <li>Precio: $8.000 por entrada</li>
                        <li>Incluye 1 hora de salto + calcetines antideslizantes</li>
                        <li>M√°ximo 6 entradas por solicitud</li>
                        <li>Vigencia: 3 meses desde la compra</li>
                    </ul>
                </div>

                <form id="formCompraJumper" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="sucursalJumper">Sucursal Jumper Park</label>
                            <select id="sucursalJumper" name="sucursalJumper" required>
                                <option value="">Seleccione una sucursal</option>
                                <option value="puente-alto">Puente Alto</option>
                                <option value="plaza-sur">Plaza Sur</option>
                                <option value="alto-las-condes">Alto Las Condes</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="cantidadJumper">Cantidad de Entradas</label>
                            <input type="number" id="cantidadJumper" name="cantidadJumper" min="1" max="6" required>
                        </div>

                        <div class="form-group">
                            <label for="comentariosJumper">Comentarios (Opcional)</label>
                            <textarea id="comentariosJumper" name="comentariosJumper" rows="3" 
                                    placeholder="Alg√∫n comentario adicional"></textarea>
                        </div>
                    </div>

                    <div class="total-display" id="totalJumper" style="display: none;">
                        <h3>Total a Pagar: <span id="montoTotalJumper">$0</span></h3>
                    </div>

                    <button type="submit" class="btn btn-primary btn-enviar-jumper">
                        ü§∏ Solicitar Entradas Jumper Park
                    </button>
                </form>
                

            <!-- Tab: Compra Gimnasio -->
            <div class="tab-content" id="tab-compra-gimnasio">
                <h2>üí™ Compra Gimnasio</h2>
                
                <div class="info-box" style="background: #d4edda; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <p><strong>üìã Informaci√≥n:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Mensualidades para gimnasios asociados</li>
                        <li>Pacific: $25.000 por mes</li>
                        <li>Sportlife: $30.000 por mes</li>
                        <li>M√°ximo 3 meses por solicitud</li>
                        <li>Debe presentar certificado m√©dico para inicio</li>
                    </ul>
                </div>

                <form id="formCompraGimnasio" enctype="multipart/form-data">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="redGimnasio">Red de Gimnasio</label>
                            <select id="redGimnasio" name="redGimnasio" required>
                                <option value="">Seleccione un gimnasio</option>
                                <option value="pacific">Pacific ($25.000/mes)</option>
                                <option value="sportlife">Sportlife ($30.000/mes)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="cantidadMeses">Cantidad de Meses</label>
                            <input type="number" id="cantidadMeses" name="cantidadMeses" min="1" max="3" required>
                        </div>

                        <div class="form-group">
                            <label for="sucursalGimnasio">Sucursal Preferida</label>
                            <input type="text" id="sucursalGimnasio" name="sucursalGimnasio" required 
                                   placeholder="Ej: Puente Alto Mall">
                        </div>

                        <div class="form-group">
                            <label for="comentariosGimnasio">Comentarios (Opcional)</label>
                            <textarea id="comentariosGimnasio" name="comentariosGimnasio" rows="3" 
                                    placeholder="Alg√∫n comentario adicional"></textarea>
                        </div>
                    </div>

                    <div class="total-display" id="totalGimnasio" style="display: none;">
                        <h3>Total a Pagar: <span id="montoTotalGimnasio">$0</span></h3>
                    </div>

                    <button type="submit" class="btn btn-primary btn-enviar-gimnasio">
                        üí™ Solicitar Mensualidad Gimnasio
                    </button>
                </form>
                
            <!-- NUEVA PESTA√ëA: Pr√©stamos / Fondo Solidario -->
            <div class="tab-content" id="tab-prestamos">
                <div class="container">
                    <h2>üí∞ Pr√©stamos y Fondo Solidario</h2>

                    <!-- Informaci√≥n General -->
                    <div class="info-box" style="background: #e0b0f5; padding: 20px; border-radius: 12px; margin-bottom: 30px; border-left: 4px solid #2196F3;">
                        <h3 style="color: #1976D2; margin-top: 0;">üìã Informaci√≥n General</h3>
                        <p style="margin-bottom: 10px;"><strong>Requisitos b√°sicos para pr√©stamos:</strong></p>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Tener al menos 3 descuentos del Servicio de Bienestar APS</li>
                            <li>Presentar documentaci√≥n completa y vigente</li>
                            <li>Evaluaci√≥n por parte del Trabajador/a Social del Servicio</li>
                        </ul>
                        <p>
                            Puedes descargar los formularios oficiales (PDF generado desde las im√°genes subidas al sitio) y completarlos para solicitar el beneficio correspondiente.
                        </p>
                    </div>

                    <!-- Grid de Tipos de Pr√©stamos y Fondo -->
                    <div class="prestamos-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; margin-bottom: 40px;">
                        
                        <!-- Pr√©stamos M√©dicos -->
                        <div class="prestamo-card" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; padding: 25px; border-radius: 15px; box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <span style="font-size: 2.5em;">üè•</span>
                                <h3 style="margin: 0; font-size: 1.4em;">Pr√©stamos M√©dicos</h3>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <p style="margin: 0 0 10px 0; font-weight: 500;">Caracter√≠sticas:</p>
                                <ul style="margin: 0; padding-left: 15px; list-style: none;">
                                    <li style="margin-bottom: 5px;">üíµ Tope: $500.000</li>
                                    <li style="margin-bottom: 5px;">üìÖ M√°ximo: 12 cuotas</li>
                                    <li style="margin-bottom: 5px;">‚ö° Sujeto a evaluaci√≥n del Trabajador/a Social</li>
                                    <li style="margin-bottom: 5px;">üìã Requiere al menos 3 descuentos al Servicio de Bienestar APS</li>
                                </ul>
                            </div>
                            <button class="btn btn-primary btn-download" data-img="../assets/formulario-prestamos.png" data-name="formulario-prestamo-medico.pdf" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                                üìÑ Descargar Formulario
                            </button>
                        </div>

                        <!-- Pr√©stamos de Emergencia -->
                        <div class="prestamo-card" style="background: linear-gradient(135deg, #ff9500 0%, #ff6b35 100%); color: white; padding: 25px; border-radius: 15px; box-shadow: 0 6px 20px rgba(255, 149, 0, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <span style="font-size: 2.5em;">üö®</span>
                                <h3 style="margin: 0; font-size: 1.4em;">Pr√©stamos de Emergencia</h3>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <p style="margin: 0 0 10px 0; font-weight: 500;">Caracter√≠sticas:</p>
                                <ul style="margin: 0; padding-left: 15px; list-style: none;">
                                    <li style="margin-bottom: 5px;">üíµ Tope: $500.000</li>
                                    <li style="margin-bottom: 5px;">üìÖ Cuotas seg√∫n condiciones contractuales</li>
                                    <li style="margin-bottom: 5px;">‚ö° Evaluaci√≥n por Trabajador/a Social</li>
                                    <li style="margin-bottom: 5px;">üí∞ Descontado de liquidaci√≥n de sueldo</li>
                                </ul>
                            </div>
                            <button class="btn btn-primary btn-download" data-img="../assets/formulario-prestamos.png" data-name="formulario-prestamo-emergencia.pdf" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                                üìÑ Descargar Formulario
                            </button>
                        </div>

                        <!-- Pr√©stamo Libre Disposici√≥n -->
                        <div class="prestamo-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 25px; border-radius: 15px; box-shadow: 0 6px 20px rgba(79, 172, 254, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <span style="font-size: 2.5em;">üí≥</span>
                                <h3 style="margin: 0; font-size: 1.4em;">Pr√©stamo Libre Disposici√≥n</h3>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <p style="margin: 0 0 10px 0; font-weight: 500;">Caracter√≠sticas:</p>
                                <ul style="margin: 0; padding-left: 15px; list-style: none;">
                                    <li style="margin-bottom: 5px;">üíµ Tope: $300.000</li>
                                    <li style="margin-bottom: 5px;">üìÖ M√°ximo: 6 cuotas</li>
                                    <li style="margin-bottom: 5px;">üìã Requiere las √∫ltimas 3 liquidaciones</li>
                                    <li style="margin-bottom: 5px;">üÜî Fotocopia de c√©dula de identidad</li>
                                    <li style="margin-bottom: 5px;">üìù Formulario de pr√©stamo de libre disposici√≥n</li>
                                </ul>
                            </div>
                            <button class="btn btn-primary btn-download" data-img="../assets/formulario-prestamos-libre-disposicion.png" data-name="formulario-prestamo-libre-disposicion.pdf" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                                üìÑ Descargar Formulario
                            </button>
                        </div>

                        <!-- Fondo Solidario -->
                        <div class="prestamo-card" style="background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%); color: white; padding: 25px; border-radius: 15px; box-shadow: 0 6px 20px rgba(86, 171, 47, 0.3);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <span style="font-size: 2.5em;">ü§ù</span>
                                <h3 style="margin: 0; font-size: 1.4em;">Fondo Solidario</h3>
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <p style="margin: 0 0 10px 0; font-weight: 500;">Caracter√≠sticas:</p>
                                <ul style="margin: 0; padding-left: 15px; list-style: none;">
                                    <li style="margin-bottom: 5px;">üéÅ Ayudas sin retorno</li>
                                    <li style="margin-bottom: 5px;">üè• Emergencias de salud</li>
                                    <li style="margin-bottom: 5px;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Situaciones familiares complejas</li>
                                    <li style="margin-bottom: 5px;">üìã Evaluaci√≥n previa por Trabajador/a Social</li>
                                    <li style="margin-bottom: 5px;">ü§ù En conjunto con Comit√© del Servicio de Bienestar APS</li>
                                </ul>
                            </div>
                            <button class="btn btn-primary btn-download" data-img="../assets/formulario-prestamos.png" data-name="formulario-fondo-solidario.pdf" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                                üìÑ Descargar Formulario
                            </button>
                        </div>
                    </div>
                </div>
               
                <!-- Formulario de Solicitud -->
                <div class="solicitud-section" style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin-top: 30px;">
                    <h3 style="color: #495057; margin-bottom: 20px; text-align: center;">üìã Solicitar Pr√©stamo o Fondo Solidario</h3>
                    
                    <form id="formSolicitudPrestamo" enctype="multipart/form-data">
                        <div class="form-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            
                            <!-- Informaci√≥n Personal -->
                            <div class="form-group">
                                <label for="rutPrestamo">RUT del Afiliado *</label>
                                <input type="text" id="rutPrestamo" name="rutPrestamo" required placeholder="12.345.678-9" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                            </div>
                            
                            <div class="form-group">
                                <label for="nombrePrestamo">Nombre Completo *</label>
                                <input type="text" id="nombrePrestamo" name="nombrePrestamo" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                            </div>
                            
                            <div class="form-group">
                                <label for="emailPrestamo">Correo Electr√≥nico *</label>
                                <input type="email" id="emailPrestamo" name="emailPrestamo" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                            </div>
                            
                            <div class="form-group">
                                <label for="telefonoPrestamo">Tel√©fono *</label>
                                <input type="tel" id="telefonoPrestamo" name="telefonoPrestamo" required placeholder="+569..." style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                            </div>
                            
                            <!-- Tipo de Solicitud -->
                            <div class="form-group">
                                <label for="tipoSolicitud">Tipo de Solicitud *</label>
                                <select id="tipoSolicitud" name="tipoSolicitud" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                                    <option value="">Seleccione tipo de solicitud</option>
                                    <option value="prestamo-medico">Pr√©stamo M√©dico</option>
                                    <option value="prestamo-emergencia">Pr√©stamo de Emergencia</option>
                                    <option value="prestamo-libre-disposicion">Pr√©stamo de Libre Disposici√≥n</option>
                                    <option value="fondo-solidario">Fondo Solidario</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="montoSolicitado">Monto Solicitado *</label>
                                <input type="number" id="montoSolicitado" name="montoSolicitado" required min="1" placeholder="Ejemplo: 250000" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                            </div>
                            
                            <!-- Descripci√≥n de la solicitud -->
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label for="descripcionSolicitud">Descripci√≥n de la Solicitud *</label>
                                <textarea id="descripcionSolicitud" name="descripcionSolicitud" required rows="4" placeholder="Describa detalladamente el motivo de su solicitud..." style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; resize: vertical;"></textarea>
                            </div>
                        </div>
                        
                        <!-- Documentos Requeridos -->
                        <div class="documentos-section" style="margin-top: 30px;">
                            <h4 style="color: #495057; margin-bottom: 20px;">üìé Documentos Requeridos</h4>
                            <div class="documentos-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                
                                <div class="form-group">
                                    <label for="formularioCompleto">Formulario Completo y Firmado *</label>
                                    <input type="file" id="formularioCompleto" name="formularioCompleto" required accept=".pdf,.jpg,.jpeg,.png" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                                    <small style="color: #6c757d;">Formulario descargado y completado del tipo de pr√©stamo seleccionado</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="cedulaIdentidad">Fotocopia C√©dula de Identidad *</label>
                                    <input type="file" id="cedulaIdentidad" name="cedulaIdentidad" required accept=".pdf,.jpg,.jpeg,.png" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                                    <small style="color: #6c757d;">Ambas caras de la c√©dula en un solo archivo</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="liquidacionesSueldo">√öltimas 3 Liquidaciones de Sueldo *</label>
                                    <input type="file" id="liquidacionesSueldo" name="liquidacionesSueldo" required accept=".pdf,.jpg,.jpeg,.png" multiple style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                                    <small style="color: #6c757d;">Puede seleccionar m√∫ltiples archivos</small>
                                </div>
                                
                                <!-- Documentos adicionales seg√∫n tipo -->
                                <div class="form-group" id="documentosAdicionales" style="display: none;">
                                    <label for="documentosExtras">Documentos Adicionales</label>
                                    <input type="file" id="documentosExtras" name="documentosExtras" accept=".pdf,.jpg,.jpeg,.png" multiple style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px;">
                                    <small id="documentosExtrasInfo" style="color: #6c757d;"></small>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 30px;">
                            <button type="submit" class="btn btn-primary btn-enviar-prestamo" style="padding: 15px 40px; font-size: 1.1em; font-weight: 600; background: linear-gradient(135deg, #007bff, #0056b3); border: none; border-radius: 10px; color: white; cursor: pointer; transition: all 0.3s;">
                                üì§ Enviar Solicitud de Pr√©stamo
                            </button>
                        </div>
                    </form>
                </div>
            </div> 
      
            <!-- Tab: Solicitudes -->
            <div class="tab-content" id="tab-solicitudes">
                <h2>üìù Mis Solicitudes</h2>
                
                <div class="solicitudes-container">
                    <div class="solicitudes-filtros" style="margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="filtrarSolicitudes('todas')">Todas</button>
                        <button class="btn btn-warning" onclick="filtrarSolicitudes('pendientes')">Pendientes</button>
                        <button class="btn btn-success" onclick="filtrarSolicitudes('aprobadas')">Aprobadas</button>
                        <button class="btn btn-danger" onclick="filtrarSolicitudes('rechazadas')">Rechazadas</button>
                    </div>
                    
                    <div id="listaSolicitudes">
                        <!-- Aqu√≠ se cargan din√°micamente las solicitudes -->
                        <p>Cargando solicitudes...</p>
                    </div>
                </div>
                

            <!-- Tab: Mi Perfil -->
            <div class="tab-content" id="tab-perfil">
                <h2>‚öôÔ∏è Mi Perfil</h2>
                
                <div class="perfil-container">
                    <div class="perfil-info">
                        <h3>Informaci√≥n Personal</h3>
                        <div class="form-group">
                            <label>Nombre Completo:</label>
                            <input type="text" id="nombrePerfil" readonly>
                        </div>
                        <div class="form-group">
                            <label>RUT:</label>
                            <input type="text" id="rutPerfil" readonly>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="emailPerfil" readonly>
                        </div>
                        <div class="form-group">
                            <label>Fecha de Afiliaci√≥n:</label>
                            <input type="text" id="fechaAfiliacion" readonly>
                        </div>
                    </div>
                    
                    <div class="perfil-estadisticas">
                        <h3>Estad√≠sticas</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-number" id="totalSolicitudes">0</span>
                                <span class="stat-label">Total Solicitudes</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="solicitudesAprobadas">0</span>
                                <span class="stat-label">Aprobadas</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="solicitudesPendientes">0</span>
                                <span class="stat-label">Pendientes</span>
                            </div>
                        </div>
                    </div>
                </div>
                
          <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Servicio Bienestar APS - Corporaci√≥n Municipal de Puente Alto</p>
        </div>
    </footer>
                
    <!-- SCRIPTS CORREGIDOS -->
    <script type="module" src="../js/dashboard-afiliado-firebase.js"></script>
    <script type="module" src="../js/compras-unificadas.js"></script>

    <script type="module">
        // Sistema de pesta√±as mejorado
        const tabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const targetTab = this.getAttribute('data-tab');
                
                // Remover clase active de todas las pesta√±as
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Agregar clase active a la pesta√±a clickeada
                this.classList.add('active');
                
                // Mostrar el contenido correspondiente
                const targetContent = document.getElementById(`tab-${targetTab}`);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            });
        });

        // Funci√≥n para nueva solicitud
        function nuevaSolicitud() {
            console.log('Nueva solicitud clickeada');
            // Aqu√≠ puedes agregar la l√≥gica para nueva solicitud
        }

        // Funci√≥n para logout
        function logout() {
            if (confirm('¬øEst√° seguro que desea cerrar sesi√≥n?')) {
                sessionStorage.clear();
                localStorage.clear();
                window.location.href = '../index.html';
            }
        }

        // Funci√≥n para filtrar solicitudes
        function filtrarSolicitudes(tipo) {
            console.log('Filtrando solicitudes:', tipo);
            // Aqu√≠ puedes agregar la l√≥gica para filtrar solicitudes
        }

        // Hacer las funciones globales para que puedan ser llamadas desde HTML
        window.nuevaSolicitud = nuevaSolicitud;
        window.logout = logout;
        window.filtrarSolicitudes = filtrarSolicitudes;
    </script>

    <!-- Librer√≠as para generar PDF desde im√°genes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Nuevos m√≥dulos para pr√©stamos -->
    <script type="module" src="../js/prestamos-firebase.js"></script>
    <script type="module" src="../js/prestamos.js"></script>

    <style>
        /* Estilos para mostrar/ocultar botones seg√∫n la pesta√±a activa */
        .btn-enviar-gas,
        .btn-enviar-cine,
        .btn-enviar-jumper,
        .btn-enviar-gimnasio {
            margin-top: 20px;
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            font-weight: 600;
        }

        /* Solo mostrar los botones cuando su pesta√±a correspondiente est√° activa */
        #tab-compras-gas:not(.active) .btn-enviar-gas,
        #tab-compra-cine:not(.active) .btn-enviar-cine,
        #tab-compra-jumper:not(.active) .btn-enviar-jumper,
        #tab-compra-gimnasio:not(.active) .btn-enviar-gimnasio {
            display: none !important;
        }

        /* Asegurar que el contenido de las pesta√±as solo se muestre cuando est√° activo */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Modal b√°sico override si no est√° definido en CSS */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal .modal-content {
            background: #fff;
            border-radius: 8px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        }

        /* Estilos adicionales para footer */
        .footer {
            margin-top: 40px;
            padding: 20px 0;
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>

</body>
</html>
