<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Panel - Bienestar APS</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <!-- Header con usuario logueado -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../index.html">
                      <img src="../assets/images/logo-bienestar.png" alt="Logo Bienestar APS" style="height:120px; width:auto;">
                    </a>
                </div>
                <nav class="user-nav">
                    <div class="user-info">
                        <span class="user-name"></span>
                        <span class="user-rut"></span>
                    </div>
                    <button class="btn btn-logout" onclick="logout()">Cerrar Sesi√≥n</button>
                </nav>
            </div>
        </div>
    </header>
    <!-- Navegaci√≥n Dashboard -->
    <nav class="dashboard-nav">
        <div class="container">
            <ul class="nav-tabs">
    <li class="nav-tab active" data-tab="resumen">üìä Resumen</li>
    <li class="nav-tab" data-tab="compras-gas">üõí Compra de Gas</li>
    <li class="nav-tab" data-tab="compra-cine">üé¨ Compra de Cine</li>
    <li class="nav-tab" data-tab="compra-jumper">ü§∏ Compra Jumper Park</li>
    <li class="nav-tab" data-tab="compra-gimnasio">üí™ Compra Gimnasio</li>
    <li class="nav-tab" data-tab="solicitudes">üìù Solicitudes</li>
    <li class="nav-tab" data-tab="perfil">‚öôÔ∏è Mi Perfil</li>
</ul>
        </div>
    </nav>
    <!-- Contenido del Dashboard -->
    <section class="dashboard-content">
        <div class="container">
            <!-- Tab: Resumen -->
            <div class="tab-content active" id="tab-resumen">
                <div class="welcome-banner">
                    <h1 id="bienvenida-usuario"></h1>
                    <p>Aqu√≠ puedes gestionar tus beneficios y convenios</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <h3 id="beneficios-recibidos"></h3>
                            <p>Beneficios recibidos 2025</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üè™</div>
                        <div class="stat-info">
                            <h3 id="convenios-disponibles"></h3>
                            <p>Convenios disponibles</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-info">
                            <h3 id="solicitudes-pendientes"></h3>
                            <p>Solicitudes pendientes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="tiempo-afiliacion"></h3>
                            <p>Tiempo de afiliaci√≥n</p>
                        </div>
                    </div>
                </div>
                <!-- Pr√≥ximos Beneficios -->
                <div class="section-card">
                    <h2>üìÖ Pr√≥ximos Beneficios</h2>
                    <div class="timeline" id="proximos-beneficios"></div>
                </div>
                <!-- Notificaciones -->
                <div class="section-card">
                    <h2>üîî Notificaciones Recientes</h2>
                    <div class="notifications" id="notificaciones-recientes"></div>
                </div>
            </div>

            <div class="tab-content" id="tab-compras-gas">
    <h2>üõí Compra de Vales de Gas</h2>
    <form id="formCompraGas" enctype="multipart/form-data">
        <div class="form-grid">
            <!-- Informaci√≥n b√°sica -->
            <div class="form-group">
                 <div class="form-group">
                <label for="rutGas">Rut</label>
                <input type="text" id="rutGas" name="rutGas" required>
            </div>
                <div class="form-group">
                <label for="nombreGas">Nombre y Apellido Afiliado</label>
                <input type="text" id="nombreGas" name="nombreGas" required>
            </div>
                <div class="form-group">
                <label for="fechaCompraGas">Fecha de compra</label>
                <input type="date" id="fechaCompraGas" name="fechaCompraGas" required>
            </div>
                <label for="emailGas">Correo Electr√≥nico</label>
                <input type="email" id="emailGas" name="emailGas" required>
            </div>
            <div class="form-group">
                <label for="telefonoGas">Tel√©fono +569...</label>
                <input type="tel" id="telefonoGas" name="telefonoGas" required>
            </div>

            <!-- Selector de empresa -->
            <div class="form-group">
                <label>Compra Lipigas</label>
                <select id="compraLipigas" name="compraLipigas">
                    <option value="no">No</option>
                    <option value="si">S√≠</option>
                </select>
            </div>

            <!-- Opciones Lipigas -->
            <div id="lipigasOpciones" style="display:none;">
                <div class="gas-options-container">
                    <div class="gas-option">
                        <label class="gas-label">5 kilos</label>
                        <div class="gas-select-container">
                            <select id="lipigas5" name="lipigas5" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                    <div class="gas-option">
                        <label class="gas-label">11 kilos</label>
                        <div class="gas-select-container">
                            <select id="lipigas11" name="lipigas11" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                    <div class="gas-option">
                        <label class="gas-label">15 kilos</label>
                        <div class="gas-select-container">
                            <select id="lipigas15" name="lipigas15" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                    <div class="gas-option">
                        <label class="gas-label">45 kilos</label>
                        <div class="gas-select-container">
                            <select id="lipigas45" name="lipigas45" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="total-info">Total seleccionado: <span class="total-count">0</span></div>
            </div>

            <!-- Selector Abastible -->
            <div class="form-group">
                <label>Compra Abastible</label>
                <select id="compraAbastible" name="compraAbastible">
                    <option value="no">No</option>
                    <option value="si">S√≠</option>
                </select>
            </div>

            <!-- Opciones Abastible -->
            <div id="abastibleOpciones" style="display:none;">
                <div class="gas-options-container">
                    <div class="gas-option">
                        <label class="gas-label">5 kilos</label>
                        <div class="gas-select-container">
                            <select id="abastible5" name="abastible5" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                    <div class="gas-option">
                        <label class="gas-label">11 kilos</label>
                        <div class="gas-select-container">
                            <select id="abastible11" name="abastible11" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                    <div class="gas-option">
                        <label class="gas-label">15 kilos</label>
                        <div class="gas-select-container">
                            <select id="abastible15" name="abastible15" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                    <div class="gas-option">
                        <label class="gas-label">45 kilos</label>
                        <div class="gas-select-container">
                            <select id="abastible45" name="abastible45" class="gas-select">
                                <option value="0">Seleccionar cantidad</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="total-info">Total seleccionado: <span class="total-count">0</span></div>
                <div class="form-group saldo-favor">
                    <label for="saldoFavor">Saldo a favor (si aplica)</label>
                    <input type="text" id="saldoFavor" name="saldoFavor" placeholder="Fecha y monto">
                </div>
            </div>

            <!-- Comprobante -->
            <div class="form-group">
                <label for="comprobanteGas">Adjuntar comprobante de transferencia</label>
                <input type="file" id="comprobanteGas" name="comprobanteGas" required>
                <small>Recuerde que el asunto debe indicar cantidad y carga de gas (5k-11k-15k-45k).</small>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Enviar Compra</button>
    </form>
</div>
          <!-- Tab: Compra de Cine -->
<div class="tab-content" id="tab-compra-cine">
    <h2>üé¨ Compra de Entradas de Cine</h2>
    <div class="info-box" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <p><strong>üìã Informaci√≥n:</strong></p>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li>M√°ximo 4 entradas por mes</li>
            <li>Valor: $6.800 (incluye entrada + combo)</li>
            <li>V√°lido en cualquier complejo Cin√©polis o Hoyts</li>
            <li>Incluye pel√≠culas en estreno</li>
        </ul>
    </div>
    
    <form id="formCompraCine" enctype="multipart/form-data">
        <div class="form-grid">
            <div class="form-group">
                <label for="rutCine">RUT *</label>
                <input type="text" id="rutCine" name="rutCine" required placeholder="12.345.678-9">
            </div>
            
            <div class="form-group">
                <label for="nombreCine">Nombre y Apellido Afiliado *</label>
                <input type="text" id="nombreCine" name="nombreCine" required>
            </div>
            
            <div class="form-group">
                <label for="telefonoCine">Tel√©fono *</label>
                <input type="tel" id="telefonoCine" name="telefonoCine" required placeholder="+569...">
            </div>
            
            <div class="form-group">
                <label for="emailCine">Correo Electr√≥nico *</label>
                <input type="email" id="emailCine" name="emailCine" required>
            </div>
            
            <div class="form-group">
                <label for="fechaCompraCine">Fecha de Compra *</label>
                <input type="date" id="fechaCompraCine" name="fechaCompraCine" required>
            </div>
            
            <div class="form-group">
                <label for="cantidadCine">Cantidad de Entradas *</label>
                <select id="cantidadCine" name="cantidadCine" required>
                    <option value="0">Seleccione cantidad</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
            
            <div class="form-group" style="grid-column: 1 / -1;">
                <label for="comprobanteCine">Adjuntar Comprobante de Transferencia *</label>
                <input type="file" id="comprobanteCine" name="comprobanteCine" required accept="image/*,.pdf">
                <small>Formatos aceptados: JPG, PNG, PDF</small>
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary">Enviar Compra</button>
    </form>
</div>  
            <!-- Tab: Compra de Jumper Trampoline Park -->
<div class="tab-content" id="tab-compra-jumper">
    <h2>ü§∏ Compra de Entradas Jumper Trampoline Park</h2>
    <div class="info-box" style="background: #fff3e0; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <p><strong>üìã Informaci√≥n:</strong></p>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li>M√°ximo 6 entradas por mes</li>
            <li>Diversi√≥n garantizada para toda la familia</li>
            <li>Incluye acceso a todas las √°reas del parque</li>
        </ul>
    </div>
    
    <form id="formCompraJumper" enctype="multipart/form-data">
        <div class="form-grid">
            <div class="form-group">
                <label for="rutJumper">RUT *</label>
                <input type="text" id="rutJumper" name="rutJumper" required placeholder="12.345.678-9">
            </div>
            
            <div class="form-group">
                <label for="nombreJumper">Nombre y Apellido Afiliado *</label>
                <input type="text" id="nombreJumper" name="nombreJumper" required>
            </div>
            
            <div class="form-group">
                <label for="telefonoJumper">Tel√©fono *</label>
                <input type="tel" id="telefonoJumper" name="telefonoJumper" required placeholder="+569...">
            </div>
            
            <div class="form-group">
                <label for="emailJumper">Correo Electr√≥nico *</label>
                <input type="email" id="emailJumper" name="emailJumper" required>
            </div>
            
            <div class="form-group">
                <label for="fechaCompraJumper">Fecha de Compra *</label>
                <input type="date" id="fechaCompraJumper" name="fechaCompraJumper" required>
            </div>
            
            <div class="form-group">
                <label for="cantidadJumper">Cantidad de Entradas *</label>
                <select id="cantidadJumper" name="cantidadJumper" required>
                    <option value="0">Seleccione cantidad</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
            </div>
            
            <div class="form-group" style="grid-column: 1 / -1;">
                <label for="comprobanteJumper">Adjuntar Comprobante de Transferencia *</label>
                <input type="file" id="comprobanteJumper" name="comprobanteJumper" required accept="image/*,.pdf">
                <small>Formatos aceptados: JPG, PNG, PDF</small>
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary">Enviar Compra</button>
    </form>
</div>
            <!-- Tab: Compra de Gimnasio -->
<div class="tab-content" id="tab-compra-gimnasio">
    <h2>üí™ Compra de Entradas Gimnasio Energy</h2>
    <div class="info-box" style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <p><strong>üìã Informaci√≥n:</strong></p>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li>M√°ximo 4 entradas por mes</li>
            <li>Valor: $18.000 por ticket mensual</li>
            <li>V√°lido en todas las sucursales Energy</li>
            <li>Sin restricci√≥n de horarios</li>
            <li>Incluye todos los servicios</li>
        </ul>
    </div>
    
    <form id="formCompraGimnasio" enctype="multipart/form-data">
        <div class="form-grid">
            <div class="form-group">
                <label for="rutGimnasio">RUT *</label>
                <input type="text" id="rutGimnasio" name="rutGimnasio" required placeholder="12.345.678-9">
            </div>
            
            <div class="form-group">
                <label for="nombreGimnasio">Nombre y Apellido Afiliado *</label>
                <input type="text" id="nombreGimnasio" name="nombreGimnasio" required>
            </div>
            
            <div class="form-group">
                <label for="telefonoGimnasio">Tel√©fono *</label>
                <input type="tel" id="telefonoGimnasio" name="telefonoGimnasio" required placeholder="+569...">
            </div>
            
            <div class="form-group">
                <label for="emailGimnasio">Correo Electr√≥nico *</label>
                <input type="email" id="emailGimnasio" name="emailGimnasio" required>
            </div>
            
            <div class="form-group">
                <label for="fechaCompraGimnasio">Fecha de Compra *</label>
                <input type="date" id="fechaCompraGimnasio" name="fechaCompraGimnasio" required>
            </div>
            
            <div class="form-group">
                <label for="cantidadGimnasio">Cantidad de Tickets *</label>
                <select id="cantidadGimnasio" name="cantidadGimnasio" required>
                    <option value="0">Seleccione cantidad</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
            
            <div class="form-group" style="grid-column: 1 / -1;">
                <label for="comprobanteGimnasio">Adjuntar Comprobante de Transferencia *</label>
                <input type="file" id="comprobanteGimnasio" name="comprobanteGimnasio" required accept="image/*,.pdf">
                <small>Formatos aceptados: JPG, PNG, PDF</small>
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary">Enviar Compra</button>
    </form>
</div>
            <!-- Tab: Solicitudes -->
            <div class="tab-content" id="tab-solicitudes">
                <h2>üìù Mis Solicitudes</h2>
                <div class="actions-bar">
                    <button class="btn btn-primary" onclick="nuevaSolicitud()">
                        ‚ûï Nueva Solicitud
                    </button>
                </div>
                <div class="solicitudes-list"></div>
            </div>
            <!-- Tab: Mi Perfil -->
            <div class="tab-content" id="tab-perfil">
                <h2>‚öôÔ∏è Mi Perfil</h2>
                <div class="profile-grid">
                    <div class="profile-card">
                        <h3>Informaci√≥n Personal</h3>
                        <form class="profile-form">
                            <div class="form-group">
                                <label>Nombre Completo</label>
                                <input type="text" readonly>
                            </div>
                            <div class="form-group">
                                <label>RUT</label>
                                <input type="text" readonly>
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email">
                            </div>
                            <div class="form-group">
                                <label>Tel√©fono</label>
                                <input type="tel">
                            </div>
                            <button type="submit" class="btn btn-primary">Actualizar Informaci√≥n</button>
                        </form>
                    </div>
                    <div class="profile-card">
                        <h3>Cambiar Contrase√±a</h3>
                        <form class="profile-form">
                            <div class="form-group">
                                <label>Contrase√±a Actual</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <div class="form-group">
                                <label>Nueva Contrase√±a</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <div class="form-group">
                                <label>Confirmar Contrase√±a</label>
                                <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            </div>
                            <button type="submit" class="btn btn-primary">Cambiar Contrase√±a</button>
                        </form>
                    </div>
                    <div class="profile-card">
                        <h3>Informaci√≥n de Cuenta</h3>
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-label">Fecha de afiliaci√≥n:</span>
                                <span class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Centro de Salud:</span>
                                <span class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Cargas familiares:</span>
                                <span class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Estado:</span>
                                <span class="badge success"></span>
                            </div>
                        </div>
                        <button class="btn btn-secondary">Ver Cargas Familiares</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Servicio Bienestar APS - Corporaci√≥n Municipal de Puente Alto</p>
        </div>
    </footer>
<script type="module" src="../js/dashboard-afiliado-firebase.js"></script>
<script type="module" src="../js/compras-gas.js"></script>
<script type="module">
    import { inicializarFormulario } from '../js/compras-entretenimiento.js';
    
    document.addEventListener('DOMContentLoaded', function() {
        // Inicializar formularios de entretenimiento
        inicializarFormulario('cine');
        inicializarFormulario('jumper');
        inicializarFormulario('gimnasio');
    });
</script>
</body>
</html>
