// EJECUTAR EN LA CONSOLA DEL NAVEGADOR
// Ve a tu p√°gina de login, presiona F12, pesta√±a Console, y pega este c√≥digo:

(async function crearAdministrador() {
    console.log("üîß Iniciando creaci√≥n de administrador...");
    
    try {
        // Importar Firebase
        const { initializeApp } = await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js");
        const { getAuth, createUserWithEmailAndPassword } = await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js");
        const { getFirestore, doc, setDoc } = await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js");

        // Configuraci√≥n Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA9nXi619VOgT6mUYmYfu2jja8TRAj9QJE",
            authDomain: "bienestaraps-c87f0.firebaseapp.com",
            projectId: "bienestaraps-c87f0",
            storageBucket: "bienestaraps-c87f0.firebasestorage.app",
            messagingSenderId: "471175424877",
            appId: "1:471175424877:web:7e1a44f77362d13f78c864"
        };

        console.log("üì± Inicializando Firebase...");
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Datos del administrador
        const adminData = {
            nombre: "Camila Fernanda Morales Milanesi",
            rut: "184615487", // SIN puntos ni gui√≥n
            email: "c.morales.milanesi@gmail.com",
            password: "admin123" // CAMBIA ESTA CONTRASE√ëA
        };

        console.log("üë§ Creando usuario en Authentication...");
        
        // Crear usuario en Authentication
        const userCredential = await createUserWithEmailAndPassword(
            auth, 
            adminData.email, 
            adminData.password
        );
        
        const user = userCredential.user;
        console.log("‚úÖ Usuario creado en Auth con UID:", user.uid);

        // Crear documento en Firestore
        console.log("üìÑ Creando documento en Firestore...");
        
        const firestoreData = {
            uid: user.uid,
            rut: adminData.rut,
            nombre: adminData.nombre,
            email: adminData.email,
            estado: "activo",
            createdAt: new Date(),
            updatedAt: new Date()
        };

        await setDoc(doc(db, 'administradores', user.uid), firestoreData);
        
        console.log("üéâ ¬°ADMINISTRADOR CREADO EXITOSAMENTE!");
        console.log("üìã Datos de acceso:");
        console.log("   RUT: 18.461.548-7");
        console.log("   Email:", adminData.email);
        console.log("   Contrase√±a: admin123");
        console.log("   UID:", user.uid);
        console.log("");
        console.log("üîó Ahora puedes ingresar en:");
        console.log("   " + window.location.origin + "/pages/login.html?tipo=admin");
        
        alert("‚úÖ Administrador creado exitosamente!\n\nDatos de acceso:\nRUT: 18.461.548-7\nEmail: " + adminData.email + "\nContrase√±a: admin123\n\nAhora puedes cerrar la consola e ingresar al sistema.");

    } catch (error) {
        console.error("‚ùå Error al crear administrador:", error);
        
        if (error.code === 'auth/email-already-in-use') {
            console.log("‚ö†Ô∏è  El usuario ya existe. Puedes intentar ingresar directamente.");
            alert("El usuario ya existe. Intenta ingresar con:\nRUT: 18.461.548-7\nEmail: c.morales.milanesi@gmail.com");
        } else {
            alert("Error: " + error.message);
        }
    }
})();
