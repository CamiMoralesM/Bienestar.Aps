<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso - Bienestar APS</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <!-- Header Simple -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../index.html">
                        <img src="../assets/images/logo-bienestar.png" alt="Logo Bienestar APS" style="height:120px; width:auto;">
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Login Section -->
    <section class="login-section">
        <div class="container">
            <div class="login-container">
                <div class="login-box">
                    <div class="login-header">
                        <h2 id="login-title">Acceso Afiliados</h2>
                        <p id="login-subtitle">Ingresa tus credenciales para acceder</p>
                    </div>

                    <form id="loginForm" class="login-form">
                        <div class="form-group">
                            <label for="rut">RUT</label>
                            <input 
                                type="text" 
                                id="rut" 
                                name="rut" 
                                placeholder="12.345.678-9"
                                required
                                maxlength="12"
                            >
                            <span class="error-message" id="rut-error"></span>
                        </div>

                        <div class="form-group">
                            <label for="password">Contrase√±a</label>
                            <input 
                                type="password" 
                                id="password" 
                                name="password" 
                                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                required
                            >
                            <span class="error-message" id="password-error"></span>
                        </div>

                        <div class="form-options">
                            <label class="checkbox-container">
                                <input type="checkbox" id="remember">
                                <span>Recordar sesi√≥n</span>
                            </label>
                            <a href="#" class="forgot-password" id="forgot-link">¬øOlvidaste tu contrase√±a?</a>
                        </div>

                        <button type="submit" class="btn btn-login" id="btn-submit">
                            Iniciar Sesi√≥n
                        </button>

                        <div class="login-footer" id="register-section">
                            <p>¬øNo tienes cuenta? <a href="registro.html">Reg√≠strate aqu√≠</a></p>
                            <p>¬øEres administrativo? <a href="registro-administrativo.html">Solicita acceso aqu√≠</a></p>
                        </div>
                    </form>

                    <div class="login-divider">
                        <span>O</span>
                    </div>

                    <button class="btn btn-secondary btn-back" onclick="location.href='../index.html'">
                        Volver al Inicio
                    </button>
                </div>

                <!-- Informaci√≥n adicional - Solo para afiliados -->
                <div class="login-info" id="info-section">
                    <div class="info-card afiliado-only">
                        <h3>üîê Acceso Seguro</h3>
                        <p>Tu informaci√≥n est√° protegida con los m√°s altos est√°ndares de seguridad.</p>
                    </div>
                    <div class="info-card afiliado-only">
                        <h3>üì± Contacto</h3>
                        <p>¬øProblemas para acceder?</p>
                        <p><strong>Email:</strong> Bienestar.aps@cmpuentealto.cl</p>
                        <p><strong>Tel√©fono:</strong> 22 XXX XXXX</p>
                    </div>
                    <div class="info-card afiliado-only">
                        <h3>‚è∞ Horario de Atenci√≥n</h3>
                        <p>Lunes a Jueves 8:30 - 14:00 y 15:00 - 17:30 hrs</p>
                        <p>Viernes 8:30 - 14:00 y 15:00 - 16:30 hrs.</p>
                    </div>
                    <div class="info-card admin-only" style="display:none;">
                        <h3>üîê Acceso Administrador</h3>
                        <p>Solo personal autorizado. Panel de control avanzado.</p>
                    </div>
                    <div class="info-card administrativo-only" style="display:none;">
                        <h3>üîê Acceso Administrativo</h3>
                        <p>Solo personal autorizado. Gesti√≥n de solicitudes y afiliados.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Servicio Bienestar APS - Corporaci√≥n Municipal de Puente Alto</p>
        </div>
    </footer>

    <script type="module" src="../js/auth.js"></script>
    <script>
        // Script para manejar la interfaz seg√∫n el tipo de acceso
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const tipo = urlParams.get('tipo');

            const loginTitle = document.getElementById('login-title');
            const loginSubtitle = document.getElementById('login-subtitle');
            const btnSubmit = document.getElementById('btn-submit');
            const registerSection = document.getElementById('register-section');
            const infoSection = document.getElementById('info-section');
            const forgotLink = document.getElementById('forgot-link');

            // Info cards seg√∫n tipo
            const infoCards = {
                afiliado: document.querySelectorAll('.afiliado-only'),
                admin: document.querySelector('.admin-only'),
                administrativo: document.querySelector('.administrativo-only')
            };

            if (tipo === 'admin') {
                // Acceso Administrador
                if (loginTitle) loginTitle.textContent = 'Acceso Administrador';
                if (loginSubtitle) loginSubtitle.textContent = 'Panel de control de superadministrador';
                if (btnSubmit) btnSubmit.style.background = 'linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)';
                if (registerSection) registerSection.style.display = 'none';
                if (infoSection) {
                    infoCards.afiliado.forEach(e => e.style.display = 'none');
                    if (infoCards.admin) infoCards.admin.style.display = 'block';
                    if (infoCards.administrativo) infoCards.administrativo.style.display = 'none';
                }
                if (forgotLink) forgotLink.style.display = 'none';
            } else if (tipo === 'administrativo') {
                // Acceso Administrativo
                if (loginTitle) loginTitle.textContent = 'Acceso Administrativo';
                if (loginSubtitle) loginSubtitle.textContent = 'Panel de gesti√≥n administrativa';
                if (btnSubmit) btnSubmit.style.background = 'linear-gradient(135deg, #36d1c4 0%, #5b86e5 100%)';
                if (registerSection) registerSection.style.display = 'none';
                if (infoSection) {
                    infoCards.afiliado.forEach(e => e.style.display = 'none');
                    if (infoCards.admin) infoCards.admin.style.display = 'none';
                    if (infoCards.administrativo) infoCards.administrativo.style.display = 'block';
                }
                if (forgotLink) forgotLink.style.display = 'none';
            } else {
                // Acceso Afiliados (por defecto)
                if (loginTitle) loginTitle.textContent = 'Acceso Afiliados';
                if (loginSubtitle) loginSubtitle.textContent = 'Ingresa tus credenciales para acceder';
                if (btnSubmit) btnSubmit.style.background = '';
                if (registerSection) registerSection.style.display = 'block';
                if (infoSection) {
                    infoCards.afiliado.forEach(e => e.style.display = 'block');
                    if (infoCards.admin) infoCards.admin.style.display = 'none';
                    if (infoCards.administrativo) infoCards.administrativo.style.display = 'none';
                }
                if (forgotLink) forgotLink.style.display = 'inline';
            }
        });
    </script>
</body>
</html>
